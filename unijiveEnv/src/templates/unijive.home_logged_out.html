<!DOCTYPE hmtl>
<html>
    <head>
        <title>unijive - Network Better</title>
        <meta charset = "utf-8">
            <meta name = "viewport" content="width=device-width, initial-scale=1">
                


                    <script src="https://code.jquery.com/jquery-3.1.1.min.js">
                        </script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js">
                        </script>
                        <!--
                    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js">
                        </script>
                    
                    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet">
                        
                        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
                    -->
                        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
                        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
                        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
                    
                    
                    <style>
                        a.main_page{
                            font-size: 25px;
                            font-family:'GrandHotelRegular';
                            
                        }
                        
                        
                        a.main_page:link, a.main_page:hover, a.main_page:active{
                            color: white;
                            text-decoration:none;
                            
                            
                        }
          
                
                    .welcome_splash{
                        font-family: 'CaviarDreams';
                        text-align: center;
                        color: white;
                    }
                    
                    body{
                        background-image:url('https://media.giphy.com/media/rRmOVAieVYOnS/giphy.gif');
                        background-size:cover;
                        
                        
                    }
                    
                    .main_pageLoginInput{
                        width:100%;max-width:300px;border-radius:15px;background-color:#439DBB9F;color:white;
                    }

                    input.main_pageLoginInput:focus {
                        outline-width: 0;
                    }

                    #forgotPassword{
                        cursor: pointer;
                    }

                    #createAccount{
                        cursor: pointer;
                    }

                    {% load static %}

                    @font-face{
                       font-family: 'CaviarDreams';
                       src: url("{% static 'caviar_dreams/CaviarDreams.ttf' %}");
                     }
                        </style>
                        
                        

    </head>
    {% load widget_tweaks %}
    <body>

   
        <div class = "jumbotron" style="background-color: #439DBB0A;margin-bottom:0px;">
            <h1 class = "welcome_splash">welcome to unijive!</h1>
        </div>

        <div style = "background-color:#439DBB0A;width:50%;margin:auto;border-radius:5px;">
            <form method = "POST" action="{% url 'login' %}" > {% csrf_token %}
        <div class = "container" style="margin-bottom:10px;clear:left;text-align:center;">
            <div class = "form-label" style="color:white;font-family: 'CaviarDreams';">
                    {{ form.username.label_tag }}
            </div>
            <div  style = "width:100%;max-width:300px;border-radius:15px;background-color:#439DBB9F;color:white;display: block;margin : 0 auto;">{{ form.username | add_class:"main_pageLoginInput" }}</div>
            
           <!-- <input type = "email"  name= "emailAddress" style = "width:100%;max-width:300px;border-radius:15px;background-color:#439DBB9F;color:white;">-->
                
        </div>
        
        <div class = "container" style="margin-bottom:10px;clear:left;text-align:center;">
            <div class = "form-label" style="color:white;font-family: 'CaviarDreams';">
                    {{ form.password.label_tag }}
            </div>
            
           <div style = "width:100%;max-width:300px;border-radius:15px;background-color:#439DBB9F;color:white;display: block;margin : 0 auto;">{{ form.password | add_class:"main_pageLoginInput" }}</div>
             <!-- <input type = "password" name = "password" style = "width:100%;max-width:300px;border-radius:15px;background-color:#439DBB9F;color:white;"> -->
                
        </div>
            

            <div style="text-align:center;">
                <div style = "margin-bottom:10px;">
                <button type= "submit" class="btn btn-link" style="color:white;  border:1px solid; border-radius: 15px;font-family: 'CaviarDreams';">Login</button>
                <input type="hidden" name="next" value="/logged_in/" />
                </div>
                <a id = "forgotPassword" class= "main_page" style="color:white;font-family: 'CaviarDreams';">Forgot your password?</a><br>
                <a  id = "createAccount" class= "main_page" data-toggle = "modal" data-target="#myModal" style="color:white;font-family: 'CaviarDreams';">Don't have an account? Create one right now!</a>
            </div>
        </form>
        </div>
        

        
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form id = "userCreateForm" method = "POST" name="registration"> {% csrf_token %}
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel" >Creating an Account is Easy!</h5>
                        
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        {% if messages %}
<ul class="messages" id="errors">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
                    </div>
                    <div class="modal-body">
                        <p style = "text-align:center;">Step 1: Let us know a bit about yourself!</p>
                        <div class="form-group">
                            <div class = "row">
                                <div style ="float:left;padding:10px;width:50%;">
                                    <label label-default="" for="Fname" class="col-sm-6"> First Name:</label>
                                <div class="col-sm-12">
                                    <input type="text" class="form-control" id="Fname" name="firstName" placeholder="First Name" required  >
                                </div>
                                
                                </div>
                            <div style = "float:right;padding:10px;width:50%;">
                                <label label-default="" for="Lname" class="col-sm-6" > Last Name:</label>
                                <div class="col-sm-12">
                                    <input type="text" class="form-control" id="Lname" name="lastName" placeholder="Last Name" required>
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label label-default="" for="school" class="col-sm-12"> School/University:</label>
                            <div class="col-sm-12">
                                   <!-- <input list="School/University" class="form-control" id="school" name="university" placeholder="School/University" required> -->     
                                    <select id="school">
                                            <option value = "Select an University">Select an University</option>
                                            <option value = "New York University"> New York University </option>                              
                                    </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label label-default="" for="email" class="col-sm-12"> Email Address:</label>
                            <div class="col-sm-12">
                                <input type="email" class="form-control" id="email" name="email" placeholder="example@university.edu" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label label-default="" for="username" class="col-sm-12"> Username:</label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control" id="username" name="username" placeholder="Username" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label label-default="" for="password" class="col-sm-12">Enter a Password:</label>
                            <div class="col-sm-12">
                                <input type="password" class="form-control" id="password" name="password" placeholder="" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label label-default="" for="confirmPass" class="col-sm-12">Confirm Password:</label>
                            <div class="col-sm-12">
                                <input type="password" class="form-control" id="confirmPass" name="confirmPass" placeholder="" required>
                            </div>
                        </div>



                    </div>
                
                    <div class="modal-footer">
                        <button id="registerBtn" type="button" class="btn btn-primary" >Next Step!</button>
                    </div>
                </form>
                </div>
            </div>
        </div>


            
            
            
            
                
                

        
        </body>
    <script>

$(document).ready(function() {
    $('select[id^="school"] option[value="New York University"]').attr("selected","selected");
});

$(document).on('click','#registerBtn', 
    function(event){
        //event.preventDefault();
        $.ajaxSettings.traditional = true;
        $.ajax({
            type: 'POST',
            cache: false,
            url: '/userCreate/', // whatever url is aka function that handles fields of data
            data: {
                fName: $('#Fname').val(),
                lName: $('#Lname').val(),
                university: $('#school').val(),
                email: $('#email').val(),
                username: $('#username').val(),
                password: $('#password').val(),
                confirmPassword: $('#confirmPass').val(),
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
            },

            error:function(){
                sessionStorage.setItem('firstName', $('#Fname').val());
                sessionStorage.setItem('lastName', $('#Lname').val());
                sessionStorage.setItem('university', $('#school').find(":selected").text());
                sessionStorage.setItem('email', $('#email').val());
                sessionStorage.setItem('username', $('#username').val());
                window.location = "/loginErrors/";
            },

            success: function(){
                window.location = '/register/';
                sessionStorage.removeItem('firstName');
                sessionStorage.removeItem('lastName');
                sessionStorage.removeItem('university');
                sessionStorage.removeItem('email');
                sessionStorage.removeItem('username');
            }
           
            
        });
    }


);  

 function registerErrorReload() {
    $("#createAccount").click();

        
                   
                
                
                
         }
    </script>
    
    
    
    
    
    
    
</html>
